import{r as l}from"./index.26f5e802.js";import{B as a}from"./visualized.9ead1dce.571fc008.js";import{j as i}from"./jsx-runtime.47a19089.js";class p{animations;input;button;progress;playState;constructor(t,e={}){this.animations=t.getAnimations({subtree:!0}),this.input=t.querySelector("input"),this.button=t.querySelector("button"),this.progress=0,this.playState="paused",this.setLoopState(e?.loop),e.autoplay?this.play():this.pause()}play(){this.playState="running",this.button?.classList.remove(a.play),this.button?.classList.add(a.pause),this.animations.forEach(t=>t.play()),this.updateInput()}pause(){this.playState="paused",this.button?.classList.remove(a.pause),this.button?.classList.add(a.play),this.animations.forEach(t=>t.pause())}setLoopState(t=!0){this.animations.forEach(e=>{e.effect?.updateTiming({iterations:t?1/0:1,fill:t?"auto":"forwards"}),t||(e.onfinish=()=>{this.pause()})})}togglePlayState(){this.playState==="running"?this.pause():this.play()}updateButton(){this.button&&this.button.classList.replace(a.play,a.pause)}updateInput(){this.input&&(this.animations.forEach(t=>{this.playState=t.playState,this.progress=Number(t.effect?.getComputedTiming().progress)}),this.input.value=String(this.progress)),this.playState==="running"&&requestAnimationFrame(()=>this.updateInput())}setTimelineProgress(t){this.pause(),this.animations.forEach(e=>{e.currentTime=Number(e.effect?.getComputedTiming().duration)*t||0})}}function f({loop:n=!0,autoplay:t=!1,children:e}){const[r,o]=l.useState(null),u=s=>{s&&!r&&o(new p(s,{loop:n,autoplay:t}))};return i.jsxs("figure",{ref:u,className:"my-14",children:[e,i.jsxs("div",{className:"flex w-full justify-start items-center gap-4 bg-brand-charcoal px-4 py-3 rounded-lg max-w-2xl mx-auto",children:[i.jsx("button",{"aria-label":"keyframe play button",onClick:()=>{r?.togglePlayState()},className:"w-[35px] h-[24px] border-2 text-brand-beige bg-brand-coal font-semibold py-1 px-3 rounded-full text-sm uppercase hover:text-brand-coal hover:bg-brand-yellow hover:border-brand-yellow"}),i.jsx("input",{"aria-label":"keyframe timeline",size:300,className:"w-full accent-brand-blue appearance-none bg-brand-coal h-[4px] rounded-full cursor-pointer !m-0",type:"range",min:"0",max:"1",step:"0.001",defaultValue:0,onChange:s=>r?.setTimelineProgress(Number(s.target.value))})]})]})}export{f as K};
