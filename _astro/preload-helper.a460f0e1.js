import{r as e}from"./index.26f5e802.js";import{u as $,P as U,L as B,a as S,b as O,c as _}from"./use-force-update.df9cacee.js";class b extends e.Component{getSnapshotBeforeUpdate(a){const t=this.props.childRef.current;if(t&&a.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function A({children:o,isPresent:a}){const t=e.useId(),r=e.useRef(null),p=e.useRef({width:0,height:0,top:0,left:0});return e.useInsertionEffect(()=>{const{width:s,height:i,top:f,left:h}=p.current;if(a||!r.current||!s||!i)return;r.current.dataset.motionPopId=t;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${i}px !important;
            top: ${f}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[a]),e.createElement(b,{isPresent:a,childRef:r,sizeRef:p},e.cloneElement(o,{ref:r}))}const w=({children:o,initial:a,isPresent:t,onExitComplete:r,custom:p,presenceAffectsLayout:s,mode:i})=>{const f=$(F),h=e.useId(),c=e.useMemo(()=>({id:h,initial:a,isPresent:t,custom:p,onExitComplete:n=>{f.set(n,!0);for(const u of f.values())if(!u)return;r&&r()},register:n=>(f.set(n,!1),()=>f.delete(n))}),s?void 0:[t]);return e.useMemo(()=>{f.forEach((n,u)=>f.set(u,!1))},[t]),e.useEffect(()=>{!t&&!f.size&&r&&r()},[t]),i==="popLayout"&&(o=e.createElement(A,{isPresent:t},o)),e.createElement(U.Provider,{value:c},o)};function F(){return new Map}function K(o){return e.useEffect(()=>()=>o(),[])}const m=o=>o.key||"";function T(o,a){o.forEach(t=>{const r=m(t);a.set(r,t)})}function W(o){const a=[];return e.Children.forEach(o,t=>{e.isValidElement(t)&&a.push(t)}),a}const N=({children:o,custom:a,initial:t=!0,onExitComplete:r,exitBeforeEnter:p,presenceAffectsLayout:s=!0,mode:i="sync"})=>{const f=e.useContext(B).forceRender||S()[0],h=O(),c=W(o);let n=c;const u=e.useRef(new Map).current,E=e.useRef(n),C=e.useRef(new Map).current,y=e.useRef(!0);if(_(()=>{y.current=!1,T(c,C),E.current=n}),K(()=>{y.current=!0,C.clear(),u.clear()}),y.current)return e.createElement(e.Fragment,null,n.map(l=>e.createElement(w,{key:m(l),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:s,mode:i},l)));n=[...n];const x=E.current.map(m),v=c.map(m),k=x.length;for(let l=0;l<k;l++){const d=x[l];v.indexOf(d)===-1&&!u.has(d)&&u.set(d,void 0)}return i==="wait"&&u.size&&(n=[]),u.forEach((l,d)=>{if(v.indexOf(d)!==-1)return;const R=C.get(d);if(!R)return;const L=x.indexOf(d);let g=l;if(!g){const I=()=>{C.delete(d),u.delete(d);const z=E.current.findIndex(M=>M.key===d);if(E.current.splice(z,1),!u.size){if(E.current=c,h.current===!1)return;f(),r&&r()}};g=e.createElement(w,{key:m(R),isPresent:!1,onExitComplete:I,custom:a,presenceAffectsLayout:s,mode:i},R),u.set(d,g)}n.splice(L,0,g)}),n=n.map(l=>{const d=l.key;return u.has(d)?l:e.createElement(w,{key:m(l),isPresent:!0,presenceAffectsLayout:s,mode:i},l)}),e.createElement(e.Fragment,null,u.size?n:n.map(l=>e.cloneElement(l)))},q="modulepreload",D=function(o){return"/"+o},P={},V=function(a,t,r){if(!t||t.length===0)return a();const p=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=D(s),s in P)return;P[s]=!0;const i=s.endsWith(".css"),f=i?'[rel="stylesheet"]':"";if(!!r)for(let n=p.length-1;n>=0;n--){const u=p[n];if(u.href===s&&(!i||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${f}`))return;const c=document.createElement("link");if(c.rel=i?"stylesheet":q,i||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),i)return new Promise((n,u)=>{c.addEventListener("load",n),c.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>a()).catch(s=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=s,window.dispatchEvent(i),!i.defaultPrevented)throw s})};export{N as A,V as _};
